/*!
 *         ,/
 *       ,'/
 *     ,' /
 *   ,'  /_____,
 * .'____    ,'
 *      /  ,'
 *     / ,'
 *    /,'
 *   /'
 *
 * Selectric ÏŸ v1.13.0 (Aug 22 2017) - http://lcdsantos.github.io/jQuery-Selectric/
 *
 * Copyright (c) 2017 Leonardo Santos; MIT License
 *
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&module.exports){module.exports=function(b,c){if(c===undefined){if(typeof window!=="undefined"){c=require("jquery")}else{c=require("jquery")(b)}}a(c);return c}}else{a(jQuery)}}}(function(d){var c=d(document);var a=d(window);var f="selectric";var b="Input Items Open Disabled TempShow HideSelect Wrapper Focus Hover Responsive Above Below Scroll Group GroupLabel";var i=".sl";var g=["a","e","i","o","u","n","c","y"];var h=[/[\xE0-\xE5]/g,/[\xE8-\xEB]/g,/[\xEC-\xEF]/g,/[\xF2-\xF6]/g,/[\xF9-\xFC]/g,/[\xF1]/g,/[\xE7]/g,/[\xFD-\xFF]/g];var e=function(j,k){var l=this;l.element=j;l.$element=d(j);l.state={multiple:!!l.$element.attr("multiple"),enabled:false,opened:false,currValue:-1,selectedIdx:-1,highlightedIdx:-1};l.eventTriggers={open:l.open,close:l.close,destroy:l.destroy,refresh:l.refresh,init:l.init};l.init(k)};e.prototype={utils:{isMobile:function(){return/android|ip(hone|od|ad)/i.test(navigator.userAgent)},escapeRegExp:function(j){return j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},replaceDiacritics:function(l){var j=h.length;while(j--){l=l.toLowerCase().replace(h[j],g[j])}return l},format:function(k){var j=arguments;return(""+k).replace(/\{(?:(\d+)|(\w+))\}/g,function(m,l,n){return n&&j[1]?j[1][n]:j[l]})},nextEnabledItem:function(j,k){while(j[k=(k+1)%j.length].disabled){}return k},previousEnabledItem:function(j,k){while(j[k=(k>0?k:j.length)-1].disabled){}return k},toDash:function(j){return j.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(l,k){var n=k.element;var m=k.options["on"+l];var j=[n].concat([].slice.call(arguments).slice(1));if(d.isFunction(m)){m.apply(n,j)}d(n).trigger(f+"-"+this.toDash(l),j)},arrayToClassname:function(j){var k=d.grep(j,function(l){return !!l});return d.trim(k.join(" "))}},init:function(j){var n=this;n.options=d.extend(true,{},d.fn[f].defaults,n.options,j);n.utils.triggerCallback("BeforeInit",n);n.destroy(true);if(n.options.disableOnMobile&&n.utils.isMobile()){n.disableOnMobile=true;return}n.classes=n.getClassNames();var r=d("<input/>",{"class":n.classes.input,readonly:n.utils.isMobile()});var p=d("<div/>",{"class":n.classes.items,tabindex:-1});var o=d("<div/>",{"class":n.classes.scroll});var k=d("<div/>",{"class":n.classes.prefix,html:n.options.arrowButtonMarkup});var q=d("<span/>",{"class":"label"});var l=n.$element.wrap("<div/>").parent().append(k.prepend(q),p,r);var m=d("<div/>",{"class":n.classes.hideselect});n.elements={input:r,items:p,itemsScroll:o,wrapper:k,label:q,outerWrapper:l};if(n.options.nativeOnMobile&&n.utils.isMobile()){n.elements.input=undefined;m.addClass(n.classes.prefix+"-is-native");n.$element.on("change",function(){n.refresh()})}n.$element.on(n.eventTriggers).wrap(m);n.originalTabindex=n.$element.prop("tabindex");n.$element.prop("tabindex",-1);n.populate();n.activate();n.utils.triggerCallback("Init",n)},activate:function(){var l=this;var j=l.elements.items.closest(":visible").children(":hidden").addClass(l.classes.tempshow);var k=l.$element.width();j.removeClass(l.classes.tempshow);l.utils.triggerCallback("BeforeActivate",l);l.elements.outerWrapper.prop("class",l.utils.arrayToClassname([l.classes.wrapper,l.$element.prop("class").replace(/\S+/g,l.classes.prefix+"-$&"),l.options.responsive?l.classes.responsive:""]));if(l.options.inheritOriginalWidth&&k>0){l.elements.outerWrapper.width(k)}l.unbindEvents();if(!l.$element.prop("disabled")){l.state.enabled=true;l.elements.outerWrapper.removeClass(l.classes.disabled);l.$li=l.elements.items.removeAttr("style").find("li");l.bindEvents()}else{l.elements.outerWrapper.addClass(l.classes.disabled);if(l.elements.input){l.elements.input.prop("disabled",true)}}l.utils.triggerCallback("Activate",l)},getClassNames:function(){var l=this;var j=l.options.customClass;var k={};d.each(b.split(" "),function(n,m){var o=j.prefix+m;k[m.toLowerCase()]=j.camelCase?o:l.utils.toDash(o)});k.prefix=j.prefix;return k},setLabel:function(){var n=this;var m=n.options.labelBuilder;if(n.state.multiple){var l=d.isArray(n.state.currValue)?n.state.currValue:[n.state.currValue];l=l.length===0?[0]:l;var k=d.map(l,function(o){return d.grep(n.lookupItems,function(p){return p.index===o})[0]});k=d.grep(k,function(o){if(k.length>1||k.length===0){return d.trim(o.value)!==""}return o});k=d.map(k,function(o){return d.isFunction(m)?m(o):n.utils.format(m,o)});if(n.options.multiple.maxLabelEntries){if(k.length>=n.options.multiple.maxLabelEntries+1){k=k.slice(0,n.options.multiple.maxLabelEntries);k.push(d.isFunction(m)?m({text:"..."}):n.utils.format(m,{text:"..."}))}else{k.slice(k.length-1)}}n.elements.label.html(k.join(n.options.multiple.separator))}else{var j=n.lookupItems[n.state.currValue];n.elements.label.html(d.isFunction(m)?m(j):n.utils.format(m,j))}},populate:function(){var p=this;var k=p.$element.children();var m=p.$element.find("option");var n=m.filter(":selected");var j=m.index(n);var o=0;var l=(p.state.multiple?[]:0);if(n.length>1&&p.state.multiple){j=[];n.each(function(){j.push(d(this).index())})}p.state.currValue=(~j?j:l);p.state.selectedIdx=p.state.currValue;p.state.highlightedIdx=p.state.currValue;p.items=[];p.lookupItems=[];if(k.length){k.each(function(s){var r=d(this);if(r.is("optgroup")){var q={element:r,label:r.prop("label"),groupDisabled:r.prop("disabled"),items:[]};r.children().each(function(u){var t=d(this);q.items[u]=p.getItemData(o,t,q.groupDisabled||t.prop("disabled"));p.lookupItems[o]=q.items[u];o++});p.items[s]=q}else{p.items[s]=p.getItemData(o,r,r.prop("disabled"));p.lookupItems[o]=p.items[s];o++}});p.setLabel();p.elements.items.append(p.elements.itemsScroll.html(p.getItemsMarkup(p.items)))}},getItemData:function(l,k,j){var m=this;return{index:l,element:k,value:k.val(),className:k.prop("class"),text:k.html(),slug:d.trim(m.utils.replaceDiacritics(k.html())),alt:k.attr("data-alt"),selected:k.prop("selected"),disabled:j}},getItemsMarkup:function(k){var l=this;var j="<ul>";if(d.isFunction(l.options.listBuilder)&&l.options.listBuilder){k=l.options.listBuilder(k)}d.each(k,function(m,n){if(n.label!==undefined){j+=l.utils.format('<ul class="{1}"><li class="{2}">{3}</li>',l.utils.arrayToClassname([l.classes.group,n.groupDisabled?"disabled":"",n.element.prop("class")]),l.classes.grouplabel,n.element.prop("label"));d.each(n.items,function(o,p){j+=l.getItemMarkup(p.index,p)});j+="</ul>"}else{j+=l.getItemMarkup(n.index,n)}});return j+"</ul>"},getItemMarkup:function(m,j){var n=this;var l=n.options.optionsItemBuilder;var k={value:j.value,text:j.text,slug:j.slug,index:j.index};return n.utils.format('<li data-index="{1}" class="{2}">{3}</li>',m,n.utils.arrayToClassname([j.className,m===n.items.length-1?"last":"",j.disabled?"disabled":"",j.selected?"selected":""]),d.isFunction(l)?n.utils.format(l(j,this.$element,m),j):n.utils.format(l,k))},unbindEvents:function(){var j=this;j.elements.wrapper.add(j.$element).add(j.elements.outerWrapper).add(j.elements.input).off(i)},bindEvents:function(){var j=this;j.elements.outerWrapper.on("mouseenter"+i+" mouseleave"+i,function(k){d(this).toggleClass(j.classes.hover,k.type==="mouseenter");if(j.options.openOnHover){clearTimeout(j.closeTimer);if(k.type==="mouseleave"){j.closeTimer=setTimeout(d.proxy(j.close,j),j.options.hoverIntentTimeout)}else{j.open()}}});j.elements.wrapper.on("click"+i,function(k){j.state.opened?j.close():j.open(k)});if(!(j.options.nativeOnMobile&&j.utils.isMobile())){j.$element.on("focus"+i,function(){j.elements.input.focus()});j.elements.input.prop({tabindex:j.originalTabindex,disabled:false}).on("keydown"+i,d.proxy(j.handleKeys,j)).on("focusin"+i,function(k){j.elements.outerWrapper.addClass(j.classes.focus);j.elements.input.one("blur",function(){j.elements.input.blur()});if(j.options.openOnFocus&&!j.state.opened){j.open(k)}}).on("focusout"+i,function(){j.elements.outerWrapper.removeClass(j.classes.focus)}).on("input propertychange",function(){var l=j.elements.input.val();var k=new RegExp("^"+j.utils.escapeRegExp(l),"i");clearTimeout(j.resetStr);j.resetStr=setTimeout(function(){j.elements.input.val("")},j.options.keySearchTimeout);if(l.length){d.each(j.items,function(n,p){if(p.disabled){return}if(k.test(p.text)||k.test(p.slug)){j.highlight(n);return}if(!p.alt){return}var o=p.alt.split("|");for(var m=0;m<o.length;m++){if(!o[m]){break}if(k.test(o[m].trim())){j.highlight(n);return}}})}})}j.$li.on({mousedown:function(k){k.preventDefault();k.stopPropagation()},click:function(){j.select(d(this).data("index"));return false}})},handleKeys:function(q){var p=this;var s=q.which;var t=p.options.keys;var n=d.inArray(s,t.previous)>-1;var l=d.inArray(s,t.next)>-1;var k=d.inArray(s,t.select)>-1;var o=d.inArray(s,t.open)>-1;var r=p.state.highlightedIdx;var m=(n&&r===0)||(l&&(r+1)===p.items.length);var j=0;if(s===13||s===32){q.preventDefault()}if(n||l){if(!p.options.allowWrap&&m){return}if(n){j=p.utils.previousEnabledItem(p.lookupItems,r)}if(l){j=p.utils.nextEnabledItem(p.lookupItems,r)}p.highlight(j)}if(k&&p.state.opened){p.select(r);if(!p.state.multiple||!p.options.multiple.keepMenuOpen){p.close()}return}if(o&&!p.state.opened){p.open()}},refresh:function(){var j=this;j.populate();j.activate();j.utils.triggerCallback("Refresh",j)},setOptionsDimensions:function(){var n=this;var l=n.elements.items.closest(":visible").children(":hidden").addClass(n.classes.tempshow);var k=n.options.maxHeight;var m=n.elements.items.outerWidth();var j=n.elements.wrapper.outerWidth()-(m-n.elements.items.width());if(!n.options.expandToItemText||j>m){n.finalWidth=j}else{n.elements.items.css("overflow","scroll");n.elements.outerWrapper.width(90000);n.finalWidth=n.elements.items.width();n.elements.items.css("overflow","");n.elements.outerWrapper.width("")}n.elements.items.width(n.finalWidth).height()>k&&n.elements.items.height(k);l.removeClass(n.classes.tempshow)},isInViewport:function(){var o=this;if(o.options.forceRenderAbove===true){o.elements.outerWrapper.addClass(o.classes.above)}else{if(o.options.forceRenderBelow===true){o.elements.outerWrapper.addClass(o.classes.below)}else{var k=a.scrollTop();var m=a.height();var l=o.elements.outerWrapper.offset().top;var j=o.elements.outerWrapper.outerHeight();var n=(l+j+o.itemsHeight)<=(k+m);var r=(l-o.itemsHeight)>k;var p=!n&&r;var q=!p;o.elements.outerWrapper.toggleClass(o.classes.above,p);o.elements.outerWrapper.toggleClass(o.classes.below,q)}}},detectItemVisibility:function(l){var p=this;var n=p.$li.filter("[data-index]");if(p.state.multiple){l=(d.isArray(l)&&l.length===0)?0:l;l=d.isArray(l)?Math.min.apply(Math,l):l}var k=n.eq(l).outerHeight();var o=n[l].offsetTop;var m=p.elements.itemsScroll.scrollTop();var j=o+k*2;p.elements.itemsScroll.scrollTop(j>m+p.itemsHeight?j-p.itemsHeight:o-k<m?o-k:m)},open:function(j){var k=this;if(k.options.nativeOnMobile&&k.utils.isMobile()){return false}k.utils.triggerCallback("BeforeOpen",k);if(j){j.preventDefault();if(k.options.stopPropagation){j.stopPropagation()}}if(k.state.enabled){k.setOptionsDimensions();d("."+k.classes.hideselect,"."+k.classes.open).children()[f]("close");k.state.opened=true;k.itemsHeight=k.elements.items.outerHeight();k.itemsInnerHeight=k.elements.items.height();k.elements.outerWrapper.addClass(k.classes.open);k.elements.input.val("");if(j&&j.type!=="focusin"){k.elements.input.focus()}setTimeout(function(){c.on("click"+i,d.proxy(k.close,k)).on("scroll"+i,d.proxy(k.isInViewport,k))},1);k.isInViewport();if(k.options.preventWindowScroll){c.on("mousewheel"+i+" DOMMouseScroll"+i,"."+k.classes.scroll,function(o){var m=o.originalEvent;var n=d(this).scrollTop();var l=0;if("detail" in m){l=m.detail*-1}if("wheelDelta" in m){l=m.wheelDelta}if("wheelDeltaY" in m){l=m.wheelDeltaY}if("deltaY" in m){l=m.deltaY*-1}if(n===(this.scrollHeight-k.itemsInnerHeight)&&l<0||n===0&&l>0){o.preventDefault()}})}k.detectItemVisibility(k.state.selectedIdx);k.highlight(k.state.multiple?-1:k.state.selectedIdx);k.utils.triggerCallback("Open",k)}},close:function(){var j=this;j.utils.triggerCallback("BeforeClose",j);c.off(i);j.elements.outerWrapper.removeClass(j.classes.open);j.state.opened=false;j.utils.triggerCallback("Close",j)},change:function(){var j=this;j.utils.triggerCallback("BeforeChange",j);if(j.state.multiple){d.each(j.lookupItems,function(k){j.lookupItems[k].selected=false;j.$element.find("option").prop("selected",false)});d.each(j.state.selectedIdx,function(k,l){j.lookupItems[l].selected=true;j.$element.find("option").eq(l).prop("selected",true)});j.state.currValue=j.state.selectedIdx;j.setLabel();j.utils.triggerCallback("Change",j)}else{if(j.state.currValue!==j.state.selectedIdx){j.$element.prop("selectedIndex",j.state.currValue=j.state.selectedIdx).data("value",j.lookupItems[j.state.selectedIdx].text);j.setLabel();j.utils.triggerCallback("Change",j)}}},highlight:function(j){var l=this;var k=l.$li.filter("[data-index]").removeClass("highlighted");l.utils.triggerCallback("BeforeHighlight",l);if(j===undefined||j===-1||l.lookupItems[j].disabled){return}k.eq(l.state.highlightedIdx=j).addClass("highlighted");l.detectItemVisibility(j);l.utils.triggerCallback("Highlight",l)},select:function(j){var m=this;var k=m.$li.filter("[data-index]");m.utils.triggerCallback("BeforeSelect",m,j);if(j===undefined||j===-1||m.lookupItems[j].disabled){return}if(m.state.multiple){m.state.selectedIdx=d.isArray(m.state.selectedIdx)?m.state.selectedIdx:[m.state.selectedIdx];var l=d.inArray(j,m.state.selectedIdx);if(l!==-1){m.state.selectedIdx.splice(l,1)}else{m.state.selectedIdx.push(j)}k.removeClass("selected").filter(function(n){return d.inArray(n,m.state.selectedIdx)!==-1}).addClass("selected")}else{k.removeClass("selected").eq(m.state.selectedIdx=j).addClass("selected")}if(!m.state.multiple||!m.options.multiple.keepMenuOpen){m.close()}m.change();m.utils.triggerCallback("Select",m,j)},destroy:function(j){var k=this;if(k.state&&k.state.enabled){k.elements.items.add(k.elements.wrapper).add(k.elements.input).remove();if(!j){k.$element.removeData(f).removeData("value")}k.$element.prop("tabindex",k.originalTabindex).off(i).off(k.eventTriggers).unwrap().unwrap();k.state.enabled=false}}};d.fn[f]=function(j){return this.each(function(){var k=d.data(this,f);if(k&&!k.disableOnMobile){(typeof j==="string"&&k[j])?k[j]():k.init(j)}else{d.data(this,f,new e(this,j))}})};d.fn[f].defaults={onChange:function(j){d(j).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:false,nativeOnMobile:true,openOnFocus:true,openOnHover:false,hoverIntentTimeout:500,expandToItemText:false,responsive:false,preventWindowScroll:true,inheritOriginalWidth:false,allowWrap:true,forceRenderAbove:false,forceRenderBelow:false,stopPropagation:true,optionsItemBuilder:"{text}",labelBuilder:"{text}",listBuilder:false,keys:{previous:[37,38],next:[39,40],select:[9,13,27],open:[13,32,37,38,39,40],close:[9,27]},customClass:{prefix:f,camelCase:false},multiple:{separator:", ",keepMenuOpen:true,maxLabelEntries:false}}}));
