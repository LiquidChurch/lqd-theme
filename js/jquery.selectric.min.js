(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&module.exports){module.exports=function(b,c){if(c===undefined){if(typeof window!=="undefined"){c=require("jquery")}else{c=require("jquery")(b)}}a(c);return c}}else{a(jQuery)}}}(function(d){var c=d(document);var a=d(window);var g="selectric";var b="Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll Group GroupLabel";var f=".sl";var h=["a","e","i","o","u","n","c","y"];var i=[/[\xE0-\xE5]/g,/[\xE8-\xEB]/g,/[\xEC-\xEF]/g,/[\xF2-\xF6]/g,/[\xF9-\xFC]/g,/[\xF1]/g,/[\xE7]/g,/[\xFD-\xFF]/g];var e=function(j,k){var l=this;l.element=j;l.$element=d(j);l.state={enabled:false,opened:false,currValue:-1,selectedIdx:-1};l.eventTriggers={open:l.open,close:l.close,destroy:l.destroy,refresh:l.refresh,init:l.init};l.init(k)};e.prototype={utils:{isMobile:function(){return/android|ip(hone|od|ad)/i.test(navigator.userAgent)},replaceDiacritics:function(l){var j=i.length;while(j--){l=l.toLowerCase().replace(i[j],h[j])}return l},format:function(k){var j=arguments;return(""+k).replace(/\{(?:(\d+)|(\w+))\}/g,function(m,l,n){return n&&j[1]?j[1][n]:j[l]})},nextEnabledItem:function(j,k){while(j[k=(k+1)%j.length].disabled){}return k},previousEnabledItem:function(j,k){while(j[k=(k>0?k:j.length)-1].disabled){}return k},toDash:function(j){return j.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(k,j){var m=j.element;var l=j.options["on"+k];if(d.isFunction(l)){l.call(m,m,j)}if(d.fn[g].hooks[k]){d.each(d.fn[g].hooks[k],function(){this.call(m,m,j)})}d(m).trigger(g+"-"+this.toDash(k),j)}},init:function(n){var q=this;q.options=d.extend(true,{},d.fn[g].defaults,q.options,n);q.utils.triggerCallback("BeforeInit",q);q.destroy(true);if(q.options.disableOnMobile&&q.utils.isMobile()){q.disableOnMobile=true;return}q.classes=q.getClassNames();var l=d("<input/>",{"class":q.classes.input,readonly:q.utils.isMobile()});var k=d("<div/>",{"class":q.classes.items,tabindex:-1});var o=d("<div/>",{"class":q.classes.scroll});var p=d("<div/>",{"class":q.classes.prefix,html:q.options.arrowButtonMarkup});var m=d("<p/>",{"class":"label"});var j=q.$element.wrap("<div/>").parent().append(p.prepend(m),k,l);q.elements={input:l,items:k,itemsScroll:o,wrapper:p,label:m,outerWrapper:j};q.$element.on(q.eventTriggers).wrap('<div class="'+q.classes.hideselect+'"/>');q.originalTabindex=q.$element.prop("tabindex");q.$element.prop("tabindex",false);q.populate();q.activate();q.utils.triggerCallback("Init",q)},activate:function(){var k=this;var j=k.$element.width();k.utils.triggerCallback("BeforeActivate",k);k.elements.outerWrapper.prop("class",[k.classes.wrapper,k.$element.prop("class").replace(/\S+/g,k.classes.prefix+"-$&"),k.options.responsive?k.classes.responsive:""].join(" "));if(k.options.inheritOriginalWidth&&j>0){k.elements.outerWrapper.width(j)}if(!k.$element.prop("disabled")){k.state.enabled=true;k.elements.outerWrapper.removeClass(k.classes.disabled);k.$li=k.elements.items.removeAttr("style").find("li");k.bindEvents()}else{k.elements.outerWrapper.addClass(k.classes.disabled);k.elements.input.prop("disabled",true)}k.utils.triggerCallback("Activate",k)},getClassNames:function(){var l=this;var j=l.options.customClass;var k={};d.each(b.split(" "),function(n,m){var o=j.prefix+m;k[m.toLowerCase()]=j.camelCase?o:l.utils.toDash(o)});k.prefix=j.prefix;return k},setLabel:function(){var l=this;var k=l.options.labelBuilder;var j=l.lookupItems[l.state.currValue];l.elements.label.html(d.isFunction(k)?k(j):l.utils.format(k,j))},populate:function(){var n=this;var k=n.$element.children();var l=n.$element.find("option");var j=l.index(l.filter(":selected"));var m=0;n.state.currValue=(n.state.selected=~j?j:0);n.state.selectedIdx=n.state.currValue;n.items=[];n.lookupItems=[];if(k.length){k.each(function(q){var p=d(this);if(p.is("optgroup")){var o={element:p,label:p.prop("label"),groupDisabled:p.prop("disabled"),items:[]};p.children().each(function(t){var s=d(this);var u=s.html();o.items[t]={index:m,element:s,value:s.val(),text:u,slug:n.utils.replaceDiacritics(u),disabled:o.groupDisabled};n.lookupItems[m]=o.items[t];m++});n.items[q]=o}else{var r=p.html();n.items[q]={index:m,element:p,value:p.val(),text:r,slug:n.utils.replaceDiacritics(r),disabled:p.prop("disabled")};n.lookupItems[m]=n.items[q];m++}});n.setLabel();n.elements.items.append(n.elements.itemsScroll.html(n.getItemsMarkup(n.items)))}},getItemsMarkup:function(k){var l=this;var j="<ul>";d.each(k,function(m,n){if(n.label!==undefined){j+=l.utils.format('<ul class="{1}"><li class="{2}">{3}</li>',d.trim([l.classes.group,n.groupDisabled?"disabled":"",n.element.prop("class")].join(" ")),l.classes.grouplabel,n.element.prop("label"));d.each(n.items,function(o,p){j+=l.getItemMarkup(p.index,p)});j+="</ul>"}else{j+=l.getItemMarkup(n.index,n)}});return j+"</ul>"},getItemMarkup:function(k,m){var l=this;var j=l.options.optionsItemBuilder;return l.utils.format('<li data-index="{1}" class="{2}">{3}</li>',k,d.trim([k===l.state.currValue?"selected":"",k===l.items.length-1?"last":"",m.disabled?"disabled":""].join(" ")),d.isFunction(j)?j(m,m.element,k):l.utils.format(j,m))},bindEvents:function(){var j=this;j.elements.wrapper.add(j.$element).add(j.elements.outerWrapper).add(j.elements.input).off(f);j.elements.outerWrapper.on("mouseenter"+f+" mouseleave"+f,function(k){d(this).toggleClass(j.classes.hover,k.type==="mouseenter");if(j.options.openOnHover){clearTimeout(j.closeTimer);if(k.type==="mouseleave"){j.closeTimer=setTimeout(d.proxy(j.close,j),j.options.hoverIntentTimeout)}else{j.open()}}});j.elements.wrapper.on("click"+f,function(k){j.state.opened?j.close():j.open(k)});j.elements.input.prop({tabindex:j.originalTabindex,disabled:false}).on("keypress"+f,j.handleSystemKeys).on("keydown"+f,function(l){j.handleSystemKeys(l);clearTimeout(j.resetStr);j.resetStr=setTimeout(function(){j.elements.input.val("")},j.options.keySearchTimeout);var k=l.keyCode||l.which;if(k>36&&k<41){if(!j.options.allowWrap){if((k<39&&j.state.selectedIdx===0)||(k>38&&(j.state.selectedIdx+1)===j.items.length)){return}}j.select(j.utils[(k<39?"previous":"next")+"EnabledItem"](j.items,j.state.selectedIdx))}}).on("focusin"+f,function(k){j.state.opened||j.open(k)}).on("oninput" in j.elements.input[0]?"input":"keyup",function(){if(j.elements.input.val().length){d.each(j.items,function(k,l){if(RegExp("^"+j.elements.input.val(),"i").test(l.slug)&&!l.disabled){j.select(k);return false}})}});j.$li.on({mousedown:function(k){k.preventDefault();k.stopPropagation()},click:function(){j.select(d(this).data("index"),true);return false}})},handleSystemKeys:function(k){var l=this;var j=k.keyCode||k.which;if(j==13){k.preventDefault()}if(/^(9|13|27)$/.test(j)){k.stopPropagation();l.select(l.state.selectedIdx,true)}},refresh:function(){var j=this;j.populate();j.activate();j.utils.triggerCallback("Refresh",j)},setOptionsDimensions:function(){var n=this;var l=n.elements.items.closest(":visible").children(":hidden").addClass(n.classes.tempshow);var k=n.options.maxHeight;var m=n.elements.items.outerWidth();var j=n.elements.wrapper.outerWidth()-(m-n.elements.items.width());if(!n.options.expandToItemText||j>m){n.finalWidth=j}else{n.elements.items.css("overflow","scroll");n.elements.outerWrapper.width(90000);n.finalWidth=n.elements.items.width();n.elements.items.css("overflow","");n.elements.outerWrapper.width("")}n.elements.items.width(n.finalWidth).height()>k&&n.elements.items.height(k);l.removeClass(n.classes.tempshow)},isInViewport:function(){var q=this;var o=a.scrollTop();var l=a.height();var n=q.elements.outerWrapper.offset().top;var p=q.elements.outerWrapper.outerHeight();var m=(n+p+q.itemsHeight)<=(o+l);var k=(n-q.itemsHeight)>o;var j=!m&&k;q.elements.outerWrapper.toggleClass(q.classes.above,j)},detectItemVisibility:function(l){var o=this;var k=o.$li.eq(l).outerHeight();var n=o.$li[l].offsetTop;var m=o.elements.itemsScroll.scrollTop();var j=n+k*2;o.elements.itemsScroll.scrollTop(j>m+o.itemsHeight?j-o.itemsHeight:n-k<m?n-k:m)},open:function(j){var k=this;k.utils.triggerCallback("BeforeOpen",k);if(j){j.preventDefault();j.stopPropagation()}if(k.state.enabled){k.setOptionsDimensions();d("."+k.classes.hideselect,"."+k.classes.open).children()[g]("close");k.state.opened=true;k.itemsHeight=k.elements.items.outerHeight();k.itemsInnerHeight=k.elements.items.height();k.elements.outerWrapper.addClass(k.classes.open);k.elements.input.val("");if(j&&j.type!=="focusin"){k.elements.input.focus()}c.on("click"+f,d.proxy(k.close,k)).on("scroll"+f,d.proxy(k.isInViewport,k));k.isInViewport();if(k.options.preventWindowScroll){c.on("mousewheel"+f+" DOMMouseScroll"+f,"."+k.classes.scroll,function(o){var m=o.originalEvent;var n=d(this).scrollTop();var l=0;if("detail" in m){l=m.detail*-1}if("wheelDelta" in m){l=m.wheelDelta}if("wheelDeltaY" in m){l=m.wheelDeltaY}if("deltaY" in m){l=m.deltaY*-1}if(n===(this.scrollHeight-k.itemsInnerHeight)&&l<0||n===0&&l>0){o.preventDefault()}})}k.detectItemVisibility(k.state.selectedIdx);k.utils.triggerCallback("Open",k)}},close:function(){var j=this;j.utils.triggerCallback("BeforeClose",j);j.change();c.off(f);j.elements.outerWrapper.removeClass(j.classes.open);j.state.opened=false;j.utils.triggerCallback("Close",j)},change:function(){var j=this;j.utils.triggerCallback("BeforeChange",j);if(j.state.currValue!==j.state.selectedIdx){j.$element.prop("selectedIndex",j.state.currValue=j.state.selectedIdx).data("value",j.lookupItems[j.state.selectedIdx].text);j.setLabel()}j.utils.triggerCallback("Change",j)},select:function(j,k){var l=this;if(j===undefined){return}if(!l.lookupItems[j].disabled){l.$li.filter("[data-index]").removeClass("selected").eq(l.state.selectedIdx=j).addClass("selected");l.detectItemVisibility(j);if(k){l.close()}}},destroy:function(j){var k=this;if(k.state&&k.state.enabled){k.elements.items.add(k.elements.wrapper).add(k.elements.input).remove();if(!j){k.$element.removeData(g).removeData("value")}k.$element.prop("tabindex",k.originalTabindex).off(f).off(k.eventTriggers).unwrap().unwrap();k.state.enabled=false}}};d.fn[g]=function(j){return this.each(function(){var k=d.data(this,g);if(k&&!k.disableOnMobile){(typeof j==="string"&&k[j])?k[j]():k.init(j)}else{d.data(this,g,new e(this,j))}})};d.fn[g].hooks={add:function(l,j,k){if(!this[l]){this[l]={}}this[l][j]=k},remove:function(k,j){delete this[k][j]}};d.fn[g].defaults={onChange:function(j){d(j).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:true,openOnHover:false,hoverIntentTimeout:500,expandToItemText:false,responsive:false,preventWindowScroll:true,inheritOriginalWidth:false,allowWrap:true,customClass:{prefix:g,camelCase:false},optionsItemBuilder:"{text}",labelBuilder:"{text}"}}));